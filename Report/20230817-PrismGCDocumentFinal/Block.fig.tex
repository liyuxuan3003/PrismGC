\documentclass{xMap}

\NewDocumentCommand{\BlockBUTOpen}{mm}
{
    \Block{#1}{#2}{ColorPOR}

    \fill[green!80!black] ($(cent)$) circle (0.3333);
    \fill[green] ($(cent)$) circle (0.25);
}

\NewDocumentCommand{\BlockMCGOpen}{mm}
{
    \Block{#1}{#2}{ColorICE}
    \fill[ColorDOR] ($(cent)+(-0.4,-0.4)$) rectangle ($(cent)+(-0.316,0.4)$);
    \fill[ColorDOR] ($(cent)+(+0.4,-0.4)$) rectangle ($(cent)+(+0.316,0.4)$);
}

\begin{document}
\begin{tikzpicture}[scale=1.6]
    \draw[fill=black!30!white] (-0.5,11.5) rectangle (9.5,10.5);

    \draw[fill=black!30!white] (-0.5,9.5) rectangle (9.5,8.5);

    \BlockICE{0}{0}
    \BlockBAR{0}{1}
    \BlockDIR{0}{2}{L}
    \BlockDIR{0}{3}{R}
    \BlockDIR{0}{4}{U}
    \BlockDIR{0}{5}{D}
    \BlockGRA{0}{6}
    \BlockPOR{0}{7}{1}
    \BlockPOR{0}{8}{2}
    \BlockPOR{0}{9}{3}

    \BlockTRP{2}{0}
    \BlockMCG{2}{1}
    \BlockMCGOpen{2}{2}
    \BlockBUT{2}{3}
    \BlockBUTOpen{2}{4}

    \BlockEND{2}{9}

    \foreach \x/\t in {0/冰面,1/雪堆,2/机关--左,3/机关--右,4/机关--上,5/机关--下,6/碎石,7/法阵1,8/法阵2,9/法阵3}
    {
        \path (\x,10.5) node[below] {\t};
    }

    \foreach \x/\t in {0/陷阱,1/闸门--关,2/闸门--开,3/按钮--关,4/按钮--开,9/庇护所}
    {
        \path (\x,8.5) node[below] {\t};
    }

\end{tikzpicture}
\end{document}